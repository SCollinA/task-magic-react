(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){},17:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(8),c=n.n(r),o=(n(15),n(2)),i=n(3),l=n(5),u=n(4),m=n(6),h=n(1);function d(e){return s.a.createElement("div",{className:"Task ".concat(e.parent),id:e.id},s.a.createElement("h1",{onClick:function(){console.log("".concat(e.task.name," selected")),e.selectTask(e.task)}},e.task.name),e.task.active?s.a.createElement("div",{className:"childNames"},s.a.createElement("p",null,e.task.children&&e.task.children.map(function(e){return e.name}).join(", "))):s.a.createElement("button",{name:"deleteTask",onClick:function(){return e.deleteTask(e.task.id)}},"Delete task"),s.a.createElement("div",{className:"taskTimes"},s.a.createElement("h4",null,e.task.time_changed),s.a.createElement("h6",null,e.task.time_created)),s.a.createElement("h4",{onClick:function(){console.log("".concat(e.task.name," changed")),e.completeTask(e.task)}},e.task.active.toString()))}function k(e){return s.a.createElement("div",{className:"Tasks"},e.children.map(function(t){return s.a.createElement(d,{task:t,key:t.id,selectTask:e.selectTask,completeTask:e.completeTask,deleteTask:e.deleteTask,parent:""})}),e.parents.map(function(t){return s.a.createElement(d,{task:t,key:t.id,selectTask:e.selectTask,completeTask:e.completeTask,deleteTask:e.deleteTask,parent:"parent"})}))}function p(e){return s.a.createElement("form",{className:"TaskForm",onSubmit:e.onSubmit},s.a.createElement("h1",{onClick:function(){return e.editTask(e.currentTask)}},e.currentTask?e.currentTask.name:"Login --\x3e"),s.a.createElement("input",{value:e.searchTerm,onChange:e.onChange,type:"text",placeholder:"Input Task"}),s.a.createElement("input",{type:"submit",value:"add"}))}function T(e){return s.a.createElement("div",{className:"TaskInfo"},e.currentTask?s.a.createElement("ul",null,s.a.createElement("li",null,"Active: ",e.currentTask.active?"true":"false"," "),s.a.createElement("li",null,"Time Changed: ",e.currentTask.time_changed),s.a.createElement("li",null,"Time Created: ",e.currentTask.time_created)):s.a.createElement("div",{className:"TaskInfo"}))}function f(e){return e.user?s.a.createElement("div",{className:"UserForm"},e.user.name,s.a.createElement("button",{onClick:e.logout},"Logout")):s.a.createElement("form",{className:"UserForm",onSubmit:e.login},s.a.createElement("label",{name:"username"},"Username:"),s.a.createElement("input",{type:"text",name:"username"}),s.a.createElement("label",{name:"password"},"Password:"),s.a.createElement("input",{type:"password",name:"password"}),s.a.createElement("input",{type:"submit",value:"login",name:"login"}),s.a.createElement("input",{type:"button",value:"register",name:"register",onClick:e.register}))}var g="/api",E=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e)))._login=function(e,t,a){var s="".concat(g,a?"/login":"/register");fetch(s,{method:"post",body:JSON.stringify({username:e,password:t}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return n.setState(Object(h.a)({},e))}).catch(console.log)},n._register=function(e){n._login(e.username.value,e.password.value,!1)},n._logout=function(){fetch("".concat(g,"/logout")).then(function(e){return e.json()}).then(function(e){return n.setState(Object(h.a)({},e))})},n._updateSearch=function(e){console.log("Search Term: ".concat(e)),n.setState({searchTerm:e},function(){return console.log("updated search term")})},n._selectTask=function(e){fetch("".concat(g,"/test-react-task"),{method:"post",body:JSON.stringify({taskToSelect:e}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){n.setState(Object(h.a)({},e,{searchTerm:"",taskToEdit:null}))})},n._editTask=function(e){n.setState({searchTerm:e.name,taskToEdit:e})},n._updateName=function(e){fetch("".concat(g,"/test-react-name"),{method:"post",body:JSON.stringify({taskToUpdate:e,name:n.state.searchTerm}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){n.setState(Object(h.a)({searchTerm:"",taskToEdit:null},e))})},n._completeTask=function(e){fetch("".concat(g,"/test-react-complete"),{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){n.setState(Object(h.a)({},e))})},n._deleteTask=function(e){fetch("".concat(g,"/test-react-delete"),{method:"post",body:JSON.stringify({iDToDelete:e}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){n.setState(Object(h.a)({},e))})},n.state={searchTerm:"",parents:[],currentTask:null,children:[],user:null,userTasks:[]},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(g,"/test-react")).then(function(e){return e.json()}).then(function(t){return e.setState(Object(h.a)({},t))})}},{key:"_addTask",value:function(){var e=this,t=this.state.children.filter(function(t){return t.name===e.state.searchTerm});console.log(t),!t.length>0&&fetch("".concat(g,"/test-react"),{method:"post",body:JSON.stringify({taskName:this.state.searchTerm}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){e.setState(Object(h.a)({searchTerm:""},t))})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"TaskList"},s.a.createElement("div",{className:"header"},s.a.createElement(p,{searchTerm:this.state.searchTerm,onSubmit:function(t){t.preventDefault(),e.state.taskToEdit?e._updateName(e.state.taskToEdit):e._addTask()},editTask:this._editTask,onChange:function(t){return e._updateSearch(t.target.value)},currentTask:this.state.currentTask}),s.a.createElement(T,{currentTask:this.state.currentTask}),s.a.createElement(f,{user:this.state.user,login:function(t){t.preventDefault(),e._login(t.target.username.value,t.target.password.value,!0)},register:function(t){e._register(t.nativeEvent.path[1])},logout:function(){e._logout()}})),s.a.createElement(k,{children:this.state.searchTerm?this.state.userTasks.filter(function(t){return t.name.includes(e.state.searchTerm)}):this.state.children,parents:this.state.searchTerm?[]:this.state.parents,selectTask:this._selectTask,completeTask:this._completeTask,deleteTask:this._deleteTask}))}}]),t}(a.Component),v=(n(17),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(E,null))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,t,n){e.exports=n(19)}},[[9,2,1]]]);
//# sourceMappingURL=main.3a5b1335.chunk.js.map